"use strict";
// tslint:disable:no-non-null-assertion
Object.defineProperty(exports, "__esModule", { value: true });
const __1 = require("..");
describe('defineServerRequest', () => {
    let mockEnv;
    let serverRequestDefinition;
    let serverRequest;
    beforeEach(() => {
        mockEnv = { featureServices: {} };
        serverRequest = {
            url: '/app',
            cookies: {},
            headers: {},
        };
        serverRequestDefinition = (0, __1.defineServerRequest)(serverRequest);
    });
    it('creates a Server Request definition', () => {
        expect(serverRequestDefinition.id).toBe('s2:server-request');
        expect(serverRequestDefinition.dependencies).toBeUndefined();
    });
    describe('#create', () => {
        it('creates a shared Feature Service containing version 1.0.0', () => {
            const sharedServerRequest = serverRequestDefinition.create(mockEnv);
            expect(sharedServerRequest['1.0.0']).toBeDefined();
        });
    });
    describe('ServerRequestV1', () => {
        let serverRequestBinder;
        beforeEach(() => {
            serverRequestBinder = serverRequestDefinition.create(mockEnv)['1.0.0'];
        });
        it('equals the defined serverRequest', () => {
            const { featureService } = serverRequestBinder('test:1');
            expect(featureService).toEqual(serverRequest);
        });
    });
});
//# sourceMappingURL=index.test.js.map