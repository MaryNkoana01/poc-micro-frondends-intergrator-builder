{"version":3,"file":"externals-validator.test.js","sourceRoot":"","sources":["../../../src/__tests__/externals-validator.test.ts"],"names":[],"mappings":"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","sourcesContent":["import {ExternalsValidator} from '../externals-validator';\n\ndescribe('ExternalsValidator', () => {\n  describe('#constructor', () => {\n    it('throws an error for provided externals containing an invalid version', () => {\n      expect(() => new ExternalsValidator({react: 'invalid'})).toThrowError(\n        new Error(\n          'The provided version \"invalid\" for the external \"react\" is invalid.',\n        ),\n      );\n    });\n\n    it('throws an error for provided externals containing a coercable version', () => {\n      expect(() => new ExternalsValidator({react: '2.0'})).toThrowError(\n        new Error(\n          'The provided version \"2.0\" for the external \"react\" is invalid.',\n        ),\n      );\n    });\n  });\n\n  describe('#validate', () => {\n    it(\"doesn't throw for a satisfied required external\", () => {\n      const validator = new ExternalsValidator({react: '16.6.0'});\n\n      expect(() => {\n        validator.validate({react: '^16.2.0'});\n      }).not.toThrowError();\n    });\n\n    it('throws an error for an unsatisfied required external (wrong version)', () => {\n      const validator = new ExternalsValidator({react: '16.6.0'});\n\n      expect(() => {\n        validator.validate({react: '^16.7.0'});\n      }).toThrowError(\n        new Error(\n          'The external dependency \"react\" in the required version range \"^16.7.0\" is not satisfied. The provided version is \"16.6.0\".',\n        ),\n      );\n\n      expect(() => {\n        validator.validate({react: '^16.7.0'}, 'test-consumer');\n      }).toThrowError(\n        new Error(\n          'The external dependency \"react\" as required by \"test-consumer\" in the version range \"^16.7.0\" is not satisfied. The provided version is \"16.6.0\".',\n        ),\n      );\n    });\n\n    it('throws an error for an unsatisfied required external (not provided)', () => {\n      const validator = new ExternalsValidator({});\n\n      expect(() => {\n        validator.validate({react: '^16.7.0'});\n      }).toThrowError(\n        new Error('The external dependency \"react\" is not provided.'),\n      );\n\n      expect(() => {\n        validator.validate({react: '^16.7.0'}, 'test-consumer');\n      }).toThrowError(\n        new Error(\n          'The external dependency \"react\" as required by \"test-consumer\" is not provided.',\n        ),\n      );\n    });\n\n    it('throws an error for an invalid required external', () => {\n      const validator = new ExternalsValidator({react: '16.6.0'});\n\n      expect(() => {\n        validator.validate({react: 'invalid'});\n      }).toThrowError(\n        new Error(\n          'The external dependency \"react\" in the required version range \"invalid\" is not satisfied. The provided version is \"16.6.0\".',\n        ),\n      );\n\n      expect(() => {\n        validator.validate({react: 'invalid'}, 'test-consumer');\n      }).toThrowError(\n        new Error(\n          'The external dependency \"react\" as required by \"test-consumer\" in the version range \"invalid\" is not satisfied. The provided version is \"16.6.0\".',\n        ),\n      );\n    });\n  });\n});\n"]}