"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ServerSideStateManager = void 0;
class ServerSideStateManager {
    constructor() {
        this.serializeStateCallbacks = new Map();
    }
    register(consumerId, serializeState) {
        this.serializeStateCallbacks.set(consumerId, serializeState);
    }
    serializeStates() {
        const serializedStatesByConsumerId = {};
        this.serializeStateCallbacks.forEach((serializeState, currentConsumerId) => {
            serializedStatesByConsumerId[currentConsumerId] = serializeState();
        });
        return encodeURI(JSON.stringify(serializedStatesByConsumerId));
    }
}
exports.ServerSideStateManager = ServerSideStateManager;
//# sourceMappingURL=server-side-state-manager.js.map