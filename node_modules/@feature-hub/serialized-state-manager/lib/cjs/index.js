"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.serializedStateManagerDefinition = exports.defineSerializedStateManager = void 0;
const client_side_state_manager_1 = require("./internal/client-side-state-manager");
const serialized_state_manager_1 = require("./internal/serialized-state-manager");
const server_side_state_manager_1 = require("./internal/server-side-state-manager");
/**
 * On the client this can be called with serialized states to create a
 * Serialized State Manager definition that is already populated with the given
 * serialized states, avoiding the need for the Integrator to call
 * [[SerializedStateManagerV1.setSerializedStates]] after its creation.
 */
function defineSerializedStateManager(serializedStates) {
    return {
        id: 's2:serialized-state-manager',
        create: () => {
            const serverSideStateManager = new server_side_state_manager_1.ServerSideStateManager();
            const clientSideStateManager = new client_side_state_manager_1.ClientSideStateManager();
            if (serializedStates) {
                clientSideStateManager.setSerializedStates(serializedStates);
            }
            return {
                '1.0.0': (consumerId) => ({
                    featureService: new serialized_state_manager_1.SerializedStateManager(consumerId, serverSideStateManager, clientSideStateManager),
                }),
            };
        },
    };
}
exports.defineSerializedStateManager = defineSerializedStateManager;
/**
 * @see [[defineSerializedStateManager]] for further information.
 */
exports.serializedStateManagerDefinition = defineSerializedStateManager();
//# sourceMappingURL=index.js.map