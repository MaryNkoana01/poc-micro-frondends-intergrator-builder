{"version":3,"file":"feature-app-loader.test.js","sourceRoot":"","sources":["../../../src/__tests__/feature-app-loader.test.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * @jest-environment jsdom\n */\n\n// tslint:disable:no-implicit-dependencies\n\nimport {AsyncSsrManagerV1} from '@feature-hub/async-ssr-manager';\nimport {\n  AsyncValue,\n  FeatureAppDefinition,\n  FeatureAppManager,\n  FeatureServices,\n} from '@feature-hub/core';\nimport * as React from 'react';\nimport TestRenderer from 'react-test-renderer';\nimport {CustomFeatureAppRenderingParams, FeatureAppLoader} from '..';\nimport {FeatureHubContextProvider} from '../feature-hub-context';\nimport {\n  InternalFeatureAppContainer,\n  InternalFeatureAppContainerProps,\n} from '../internal/internal-feature-app-container';\nimport {logger} from './logger';\nimport {TestErrorBoundary} from './test-error-boundary';\n\ninterface MockAsyncSsrManager extends AsyncSsrManagerV1 {\n  scheduleRerender: ((promise: Promise<unknown>) => void) & jest.Mock;\n}\n\njest.mock('../internal/internal-feature-app-container', () => ({\n  InternalFeatureAppContainer: jest.fn(\n    () => 'mocked InternalFeatureAppContainer',\n  ),\n}));\n\ndescribe('FeatureAppLoader', () => {\n  let mockFeatureAppManager: FeatureAppManager;\n  let mockGetAsyncFeatureAppDefinition: jest.Mock;\n  let mockAsyncFeatureAppDefinition: AsyncValue<FeatureAppDefinition<unknown>>;\n  let mockAsyncSsrManager: MockAsyncSsrManager;\n  let mockAddUrlForHydration: jest.Mock;\n  let mockAddStylesheetsForSsr: jest.Mock;\n  let consoleErrorSpy: jest.SpyInstance;\n\n  const usingTestErrorBoundaryConsoleErrorCalls = [\n    [\n      expect.stringContaining(\n        'React will try to recreate this component tree from scratch using the error boundary you provided, TestErrorBoundary.',\n      ),\n    ],\n  ];\n\n  const noErrorBoundaryConsoleErrorCalls = [\n    [\n      expect.stringContaining(\n        'Consider adding an error boundary to your tree to customize error handling behavior.',\n      ),\n    ],\n  ];\n\n  const expectConsoleErrorCalls = (expectedConsoleErrorCalls: unknown[][]) => {\n    try {\n      expect(consoleErrorSpy.mock.calls).toEqual(expectedConsoleErrorCalls);\n    } finally {\n      consoleErrorSpy.mockClear();\n    }\n  };\n\n  beforeAll(() => {\n    window.addEventListener('error', (e) => {\n      // Prevent JSDOM from messing with the errors. See also:\n      // https://github.com/jestjs/jest/issues/5223#issuecomment-355440432\n      e.preventDefault();\n    });\n  });\n\n  beforeEach(() => {\n    consoleErrorSpy = jest.spyOn(console, 'error');\n\n    if (document.head) {\n      document.head.innerHTML = '';\n    }\n\n    mockAsyncFeatureAppDefinition = new AsyncValue(\n      new Promise<FeatureAppDefinition<unknown>>(jest.fn()),\n    );\n\n    mockGetAsyncFeatureAppDefinition = jest.fn(\n      () => mockAsyncFeatureAppDefinition,\n    );\n\n    mockFeatureAppManager = {\n      getAsyncFeatureAppDefinition: mockGetAsyncFeatureAppDefinition,\n      createFeatureAppScope: jest.fn(),\n      preloadFeatureApp: jest.fn(),\n    } as Partial<FeatureAppManager> as FeatureAppManager;\n\n    mockAsyncSsrManager = {\n      scheduleRerender: jest.fn(),\n      renderUntilCompleted: jest.fn(),\n    };\n\n    mockAddUrlForHydration = jest.fn();\n    mockAddStylesheetsForSsr = jest.fn();\n  });\n\n  afterEach(() => {\n    expect(consoleErrorSpy).not.toHaveBeenCalled();\n    consoleErrorSpy.mockRestore();\n  });\n\n  it('throws an error when rendered without a FeatureHubContextProvider', () => {\n    expect(() =>\n      TestRenderer.create(\n        <FeatureAppLoader featureAppId=\"testId\" src=\"example.js\" />,\n      ),\n    ).toThrowError(\n      new Error(\n        'No Feature Hub context was provided! There are two possible causes: 1.) No FeatureHubContextProvider was rendered in the React tree. 2.) A Feature App that renders itself a FeatureAppLoader or a FeatureAppContainer did not declare @feature-hub/react as an external package.',\n      ),\n    );\n\n    expectConsoleErrorCalls(noErrorBoundaryConsoleErrorCalls);\n  });\n\n  const renderWithFeatureHubContext = (\n    node: React.ReactNode,\n    options: {\n      customLogger?: boolean;\n      handleError?: (error: Error) => void;\n    } = {},\n  ) => {\n    const {customLogger = true, handleError = jest.fn()} = options;\n\n    return TestRenderer.create(\n      <FeatureHubContextProvider\n        value={{\n          featureAppManager: mockFeatureAppManager,\n          asyncSsrManager: mockAsyncSsrManager,\n          addUrlForHydration: mockAddUrlForHydration,\n          addStylesheetsForSsr: mockAddStylesheetsForSsr,\n          logger: customLogger ? logger : undefined,\n        }}\n      >\n        <TestErrorBoundary handleError={handleError}>{node}</TestErrorBoundary>\n      </FeatureHubContextProvider>,\n    );\n  };\n\n  it('throws an error if no src is provided', () => {\n    const handleError = jest.fn();\n\n    const testRenderer = renderWithFeatureHubContext(\n      <FeatureAppLoader featureAppId=\"testId\" src=\"\" />,\n      {handleError},\n    );\n\n    expect(handleError.mock.calls).toEqual([[new Error('No src provided.')]]);\n    expect(testRenderer.toJSON()).toBe('test error boundary');\n    expectConsoleErrorCalls(usingTestErrorBoundaryConsoleErrorCalls);\n  });\n\n  describe('when rendering initially', () => {\n    describe('when given no children function', () => {\n      it('renders nothing', () => {\n        const testRenderer = renderWithFeatureHubContext(\n          <FeatureAppLoader featureAppId=\"testId\" src=\"example.js\" />,\n        );\n\n        expect(testRenderer.toJSON()).toBeNull();\n      });\n    });\n  });\n\n  describe('without a css prop', () => {\n    it('does not change the document head', () => {\n      renderWithFeatureHubContext(\n        <FeatureAppLoader featureAppId=\"testId\" src=\"example.js\" />,\n      );\n\n      expect(document.head).toMatchSnapshot();\n    });\n\n    it('does not try to add stylesheets for SSR', () => {\n      renderWithFeatureHubContext(\n        <FeatureAppLoader featureAppId=\"testId\" src=\"example.js\" />,\n      );\n\n      expect(mockAddStylesheetsForSsr).not.toHaveBeenCalled();\n    });\n  });\n\n  describe('with a css prop', () => {\n    it('appends link elements to the document head', () => {\n      renderWithFeatureHubContext(\n        <FeatureAppLoader\n          featureAppId=\"testId\"\n          src=\"example.js\"\n          css={[\n            {href: 'https://example.com/foo.css'},\n            {href: 'bar.css', media: 'print'},\n          ]}\n        />,\n      );\n\n      expect(document.head).toMatchSnapshot();\n    });\n\n    it('does not add the stylesheets for SSR', () => {\n      renderWithFeatureHubContext(\n        <FeatureAppLoader\n          featureAppId=\"testId\"\n          src=\"example.js\"\n          css={[{href: 'foo.css'}]}\n        />,\n      );\n\n      expect(mockAddStylesheetsForSsr).not.toHaveBeenCalled();\n    });\n\n    describe('when the css has already been appended', () => {\n      it('does not append the css a second time', () => {\n        renderWithFeatureHubContext(\n          <FeatureAppLoader\n            featureAppId=\"testId\"\n            src=\"example.js\"\n            css={[{href: 'foo.css'}]}\n          />,\n        );\n\n        renderWithFeatureHubContext(\n          <FeatureAppLoader\n            featureAppId=\"testId\"\n            src=\"example.js\"\n            css={[{href: 'foo.css'}]}\n          />,\n        );\n\n        expect(document.head).toMatchSnapshot();\n      });\n    });\n\n    describe('and a baseUrl', () => {\n      it('appends link elements to the document head', () => {\n        renderWithFeatureHubContext(\n          <FeatureAppLoader\n            featureAppId=\"testId\"\n            baseUrl=\"http://feature-hub.io\"\n            src=\"example.js\"\n            css={[\n              {href: 'https://example.com/foo.css'},\n              {href: 'bar.css', media: 'print'},\n            ]}\n          />,\n        );\n\n        expect(document.head).toMatchSnapshot();\n      });\n    });\n  });\n\n  describe('when a Feature App definition is synchronously available', () => {\n    let mockFeatureAppDefinition: FeatureAppDefinition<unknown>;\n\n    beforeEach(() => {\n      mockFeatureAppDefinition = {create: jest.fn()};\n\n      mockAsyncFeatureAppDefinition = new AsyncValue(\n        Promise.resolve(mockFeatureAppDefinition),\n      );\n    });\n\n    it('calls getAsyncFeatureAppDefinition with the given src exactly once', () => {\n      renderWithFeatureHubContext(\n        <FeatureAppLoader featureAppId=\"testId\" src=\"example.js\" />,\n      );\n\n      expect(mockGetAsyncFeatureAppDefinition.mock.calls).toEqual([\n        ['example.js', undefined],\n      ]);\n    });\n\n    describe('with a baseUrl and a relative src', () => {\n      it('calls getAsyncFeatureAppDefinition with a prepended src', () => {\n        renderWithFeatureHubContext(\n          <FeatureAppLoader\n            featureAppId=\"testId\"\n            baseUrl=\"/base\"\n            src=\"example.js\"\n          />,\n        );\n\n        expect(mockGetAsyncFeatureAppDefinition.mock.calls).toEqual([\n          ['/base/example.js', undefined],\n        ]);\n      });\n    });\n\n    describe('with a baseUrl and an absolute src', () => {\n      it('calls getAsyncFeatureAppDefinition with the absolute src', () => {\n        renderWithFeatureHubContext(\n          <FeatureAppLoader\n            featureAppId=\"testId\"\n            baseUrl=\"/base\"\n            src=\"http://example.com/foo.js\"\n          />,\n        );\n\n        expect(mockGetAsyncFeatureAppDefinition.mock.calls).toEqual([\n          ['http://example.com/foo.js', undefined],\n        ]);\n      });\n    });\n\n    describe('with a moduleType', () => {\n      it('calls getAsyncFeatureAppDefinition with the given src and moduleType', () => {\n        renderWithFeatureHubContext(\n          <FeatureAppLoader\n            featureAppId=\"testId\"\n            src=\"example.js\"\n            moduleType=\"a\"\n            serverModuleType=\"b\"\n          />,\n        );\n\n        expect(mockGetAsyncFeatureAppDefinition.mock.calls).toEqual([\n          ['example.js', 'a'],\n        ]);\n      });\n    });\n\n    it('renders an InternalFeatureAppContainer', () => {\n      const onError = jest.fn();\n      const beforeCreate = jest.fn();\n      const done = jest.fn();\n      const children = jest.fn();\n\n      const testRenderer = renderWithFeatureHubContext(\n        <FeatureAppLoader\n          src=\"example.js\"\n          featureAppId=\"testId\"\n          config=\"testConfig\"\n          beforeCreate={beforeCreate}\n          done={done}\n          onError={onError}\n          baseUrl=\"/base\"\n          children={children}\n        />,\n      );\n\n      expect(testRenderer.toJSON()).toBe('mocked InternalFeatureAppContainer');\n\n      expect(InternalFeatureAppContainer).toHaveBeenCalledWith(\n        {\n          baseUrl: '/base',\n          beforeCreate,\n          done,\n          config: 'testConfig',\n          featureAppDefinition: mockFeatureAppDefinition,\n          featureAppId: 'testId',\n          onError,\n          children,\n          featureAppManager: mockFeatureAppManager,\n          logger,\n        } satisfies InternalFeatureAppContainerProps<\n          unknown,\n          FeatureServices,\n          string\n        >,\n        {},\n      );\n    });\n\n    it('does not schedule a rerender on the Async SSR Manager', () => {\n      renderWithFeatureHubContext(\n        <FeatureAppLoader\n          featureAppId=\"testId\"\n          src=\"example.js\"\n          serverSrc=\"example-node.js\"\n        />,\n      );\n\n      expect(mockAsyncSsrManager.scheduleRerender).not.toHaveBeenCalled();\n    });\n\n    it('does not add a URL for hydration', () => {\n      renderWithFeatureHubContext(\n        <FeatureAppLoader\n          featureAppId=\"testId\"\n          src=\"example.js\"\n          serverSrc=\"example-node.js\"\n        />,\n      );\n\n      expect(mockAddUrlForHydration).not.toHaveBeenCalled();\n    });\n  });\n\n  describe('when the async Feature App definition synchronously has an error', () => {\n    let mockError: Error;\n\n    beforeEach(() => {\n      mockError = new Error('Failed to load Feature App module.');\n\n      mockAsyncFeatureAppDefinition = new AsyncValue(\n        Promise.reject(mockError),\n        undefined,\n        mockError,\n      );\n    });\n\n    it('renders nothing and logs an error (only once)', async () => {\n      const testRenderer = renderWithFeatureHubContext(\n        <FeatureAppLoader src=\"example.js\" featureAppId=\"testId\" />,\n      );\n\n      try {\n        await mockAsyncFeatureAppDefinition.promise;\n      } catch (error) {\n        expect(error).toBe(mockError);\n      } finally {\n        expect(testRenderer.toJSON()).toBeNull();\n\n        expect(logger.error.mock.calls).toEqual([\n          [\n            'The Feature App for the src \"example.js\" and the ID \"testId\" could not be rendered.',\n            mockError,\n          ],\n        ]);\n      }\n    });\n\n    describe('with onError provided', () => {\n      it('calls onError with the error', () => {\n        const onError = jest.fn();\n\n        renderWithFeatureHubContext(\n          <FeatureAppLoader\n            featureAppId=\"testId\"\n            src=\"example.js\"\n            onError={onError}\n          />,\n        );\n\n        expect(onError.mock.calls).toEqual([[mockError]]);\n      });\n\n      it('does not log the error', () => {\n        renderWithFeatureHubContext(\n          <FeatureAppLoader\n            featureAppId=\"testId\"\n            src=\"example.js\"\n            onError={jest.fn()}\n          />,\n        );\n\n        expect(logger.error).not.toHaveBeenCalled();\n      });\n\n      describe('when onError throws an error', () => {\n        let onErrorMockError: Error;\n\n        beforeEach(() => {\n          onErrorMockError = new Error('Throwing in onError.');\n        });\n\n        it('throws the error in render', () => {\n          const handleError = jest.fn();\n\n          const testRenderer = renderWithFeatureHubContext(\n            <FeatureAppLoader\n              featureAppId=\"testId\"\n              src=\"example.js\"\n              onError={() => {\n                throw onErrorMockError;\n              }}\n            />,\n            {handleError},\n          );\n\n          expect(handleError.mock.calls).toEqual([[onErrorMockError]]);\n          expect(testRenderer.toJSON()).toBe('test error boundary');\n          expectConsoleErrorCalls(usingTestErrorBoundaryConsoleErrorCalls);\n        });\n      });\n    });\n\n    describe('with children function provided', () => {\n      it('calls children with error and loading=false', () => {\n        const children = jest.fn().mockReturnValue(null);\n\n        renderWithFeatureHubContext(\n          <FeatureAppLoader\n            featureAppId=\"testId\"\n            src=\"example.js\"\n            children={children}\n          />,\n        );\n\n        expect(children.mock.calls).toEqual([\n          [\n            {\n              featureAppNode: undefined,\n              error: mockError,\n              loading: false,\n            } satisfies CustomFeatureAppRenderingParams,\n          ],\n        ]);\n      });\n\n      it('renders what children returns', () => {\n        const children = jest.fn(() => 'Custom Error UI');\n\n        const testRenderer = renderWithFeatureHubContext(\n          <FeatureAppLoader\n            featureAppId=\"testId\"\n            src=\"example.js\"\n            children={children}\n          />,\n        );\n\n        expect(testRenderer.toJSON()).toBe('Custom Error UI');\n      });\n\n      describe('when children function throws an error', () => {\n        let childrenMockError: Error;\n\n        beforeEach(() => {\n          childrenMockError = new Error('Throwing in children.');\n        });\n\n        it('throws the error in render', () => {\n          const handleError = jest.fn();\n\n          const testRenderer = renderWithFeatureHubContext(\n            <FeatureAppLoader\n              featureAppId=\"testId\"\n              src=\"example.js\"\n              children={() => {\n                throw childrenMockError;\n              }}\n            />,\n            {handleError},\n          );\n\n          expect(handleError.mock.calls).toEqual([[childrenMockError]]);\n          expect(testRenderer.toJSON()).toBe('test error boundary');\n          expectConsoleErrorCalls(usingTestErrorBoundaryConsoleErrorCalls);\n        });\n      });\n\n      describe('when onError is also provided', () => {\n        it('calls onError with the error', () => {\n          const onError = jest.fn();\n\n          renderWithFeatureHubContext(\n            <FeatureAppLoader\n              featureAppId=\"testId\"\n              src=\"example.js\"\n              onError={onError}\n              children={jest.fn().mockReturnValue(null)}\n            />,\n          );\n\n          expect(onError.mock.calls).toEqual([[mockError]]);\n        });\n\n        describe('and throws an error', () => {\n          let onErrorMockError: Error;\n\n          beforeEach(() => {\n            onErrorMockError = new Error('Throwing in onError.');\n          });\n\n          it('does not call children and throws the error in render', () => {\n            const handleError = jest.fn();\n            const children = jest.fn();\n\n            const testRenderer = renderWithFeatureHubContext(\n              <FeatureAppLoader\n                featureAppId=\"testId\"\n                src=\"example.js\"\n                onError={() => {\n                  throw onErrorMockError;\n                }}\n                children={children}\n              />,\n              {handleError},\n            );\n\n            expect(children).not.toHaveBeenCalled();\n            expect(handleError.mock.calls).toEqual([[onErrorMockError]]);\n            expect(testRenderer.toJSON()).toBe('test error boundary');\n            expectConsoleErrorCalls(usingTestErrorBoundaryConsoleErrorCalls);\n          });\n        });\n      });\n    });\n  });\n\n  describe('when a Feature App definition is loaded asynchronously', () => {\n    let mockFeatureAppDefinition: FeatureAppDefinition<unknown>;\n\n    beforeEach(() => {\n      mockFeatureAppDefinition = {create: jest.fn()};\n\n      mockAsyncFeatureAppDefinition = new AsyncValue(\n        new Promise<FeatureAppDefinition<unknown>>((resolve) =>\n          // defer to next event loop turn to guarantee asynchronism\n          setTimeout(() => resolve(mockFeatureAppDefinition)),\n        ),\n      );\n    });\n\n    it('calls getAsyncFeatureAppDefinition with the given src exactly twice', () => {\n      renderWithFeatureHubContext(\n        <FeatureAppLoader featureAppId=\"testId\" src=\"example.js\" />,\n      );\n\n      expect(mockGetAsyncFeatureAppDefinition.mock.calls).toEqual([\n        ['example.js', undefined],\n        ['example.js', undefined],\n      ]);\n    });\n\n    describe('with a baseUrl and a relative src', () => {\n      it('calls getAsyncFeatureAppDefinition with a prepended src', () => {\n        renderWithFeatureHubContext(\n          <FeatureAppLoader\n            featureAppId=\"testId\"\n            baseUrl=\"/base\"\n            src=\"example.js\"\n          />,\n        );\n\n        expect(mockGetAsyncFeatureAppDefinition.mock.calls).toEqual([\n          ['/base/example.js', undefined],\n          ['/base/example.js', undefined],\n        ]);\n      });\n    });\n\n    describe('with a baseUrl and an absolute src', () => {\n      it('calls getAsyncFeatureAppDefinition with the absolute src', () => {\n        renderWithFeatureHubContext(\n          <FeatureAppLoader\n            featureAppId=\"testId\"\n            baseUrl=\"/base\"\n            src=\"http://example.com/foo.js\"\n          />,\n        );\n\n        expect(mockGetAsyncFeatureAppDefinition.mock.calls).toEqual([\n          ['http://example.com/foo.js', undefined],\n          ['http://example.com/foo.js', undefined],\n        ]);\n      });\n    });\n\n    describe('with a moduleType prop', () => {\n      it('calls getAsyncFeatureAppDefinition with the given src and moduleType', () => {\n        renderWithFeatureHubContext(\n          <FeatureAppLoader\n            featureAppId=\"testId\"\n            src=\"example.js\"\n            moduleType=\"a\"\n            serverModuleType=\"b\"\n          />,\n        );\n\n        expect(mockGetAsyncFeatureAppDefinition.mock.calls).toEqual([\n          ['example.js', 'a'],\n          ['example.js', 'a'],\n        ]);\n      });\n    });\n\n    it('initially renders nothing', () => {\n      const testRenderer = renderWithFeatureHubContext(\n        <FeatureAppLoader featureAppId=\"testId\" src=\"example.js\" />,\n      );\n\n      expect(testRenderer.toJSON()).toBeNull();\n    });\n\n    it('renders a FeatureAppContainer when loaded', async () => {\n      const testRenderer = renderWithFeatureHubContext(\n        <FeatureAppLoader src=\"example.js\" featureAppId=\"testId\" />,\n      );\n\n      await mockAsyncFeatureAppDefinition.promise;\n\n      expect(testRenderer.toJSON()).toBe('mocked InternalFeatureAppContainer');\n    });\n\n    it('does not schedule a rerender on the Async SSR Manager', () => {\n      renderWithFeatureHubContext(\n        <FeatureAppLoader\n          featureAppId=\"testId\"\n          src=\"example.js\"\n          serverSrc=\"example-node.js\"\n        />,\n      );\n\n      expect(mockAsyncSsrManager.scheduleRerender).not.toHaveBeenCalled();\n    });\n\n    it('does not add a URL for hydration', () => {\n      renderWithFeatureHubContext(\n        <FeatureAppLoader\n          featureAppId=\"testId\"\n          src=\"example.js\"\n          serverSrc=\"example-node.js\"\n        />,\n      );\n\n      expect(mockAddUrlForHydration).not.toHaveBeenCalled();\n    });\n\n    describe('when unmounted before loading has finished', () => {\n      it('renders nothing', async () => {\n        const testRenderer = renderWithFeatureHubContext(\n          <FeatureAppLoader featureAppId=\"testId\" src=\"example.js\" />,\n        );\n\n        testRenderer.unmount();\n\n        await mockAsyncFeatureAppDefinition.promise;\n\n        expect(testRenderer.toJSON()).toBeNull();\n      });\n    });\n  });\n\n  describe('when a Feature App definition fails to load asynchronously', () => {\n    let mockError: Error;\n\n    beforeEach(() => {\n      mockError = new Error('Failed to load Feature App module.');\n\n      mockAsyncFeatureAppDefinition = new AsyncValue(\n        new Promise<FeatureAppDefinition<unknown>>((_, reject) =>\n          // defer to next event loop turn to guarantee asynchronism\n          setTimeout(() => reject(mockError)),\n        ),\n      );\n    });\n\n    it('renders nothing and logs an error', async () => {\n      const testRenderer = renderWithFeatureHubContext(\n        <FeatureAppLoader src=\"example.js\" featureAppId=\"testId\" />,\n      );\n\n      expect.assertions(4); // Note: one of the assertions is in afterEach.\n\n      try {\n        await mockAsyncFeatureAppDefinition.promise;\n      } catch (error) {\n        expect(error).toBe(mockError);\n      }\n\n      expect(testRenderer.toJSON()).toBeNull();\n\n      expect(logger.error.mock.calls).toEqual([\n        [\n          'The Feature App for the src \"example.js\" and the ID \"testId\" could not be rendered.',\n          mockError,\n        ],\n      ]);\n    });\n\n    describe('with onError provided', () => {\n      it('calls onError with the error', async () => {\n        const onError = jest.fn();\n\n        try {\n          renderWithFeatureHubContext(\n            <FeatureAppLoader\n              featureAppId=\"testId\"\n              src=\"example.js\"\n              onError={onError}\n            />,\n          );\n\n          await mockAsyncFeatureAppDefinition.promise;\n        } catch {}\n\n        expect(onError.mock.calls).toEqual([[mockError]]);\n      });\n\n      it('does not log the error', async () => {\n        try {\n          renderWithFeatureHubContext(\n            <FeatureAppLoader\n              featureAppId=\"testId\"\n              src=\"example.js\"\n              onError={jest.fn()}\n            />,\n          );\n\n          await mockAsyncFeatureAppDefinition.promise;\n        } catch {}\n\n        expect(logger.error).not.toHaveBeenCalled();\n      });\n\n      describe('when onError throws an error', () => {\n        let onErrorMockError: Error;\n\n        beforeEach(() => {\n          onErrorMockError = new Error('Throwing in onError.');\n        });\n\n        it('throws the error in render', async () => {\n          const handleError = jest.fn();\n\n          const testRenderer = renderWithFeatureHubContext(\n            <FeatureAppLoader\n              featureAppId=\"testId\"\n              src=\"example.js\"\n              onError={() => {\n                throw onErrorMockError;\n              }}\n            />,\n            {handleError},\n          );\n\n          try {\n            await mockAsyncFeatureAppDefinition.promise;\n          } catch {}\n\n          expect(handleError.mock.calls).toEqual([[onErrorMockError]]);\n          expect(testRenderer.toJSON()).toBe('test error boundary');\n          expectConsoleErrorCalls(usingTestErrorBoundaryConsoleErrorCalls);\n        });\n\n        describe('when unmounted before loading has finished', () => {\n          it('calls onError with the error', async () => {\n            const onError = jest.fn(() => {\n              throw onErrorMockError;\n            });\n\n            const testRenderer = renderWithFeatureHubContext(\n              <FeatureAppLoader\n                featureAppId=\"testId\"\n                src=\"example.js\"\n                onError={onError}\n              />,\n            );\n\n            testRenderer.unmount();\n\n            try {\n              await mockAsyncFeatureAppDefinition.promise;\n            } catch {}\n\n            expect(onError.mock.calls).toEqual([[mockError]]);\n          });\n\n          it('renders nothing', async () => {\n            const testRenderer = renderWithFeatureHubContext(\n              <FeatureAppLoader\n                featureAppId=\"testId\"\n                src=\"example.js\"\n                onError={() => {\n                  throw onErrorMockError;\n                }}\n              />,\n            );\n\n            testRenderer.unmount();\n\n            try {\n              await mockAsyncFeatureAppDefinition.promise;\n            } catch {}\n\n            expect(testRenderer.toJSON()).toBeNull();\n          });\n        });\n      });\n    });\n\n    describe('when unmounted before loading has finished', () => {\n      it('logs an error', async () => {\n        const testRenderer = renderWithFeatureHubContext(\n          <FeatureAppLoader featureAppId=\"testId\" src=\"example.js\" />,\n        );\n\n        testRenderer.unmount();\n\n        expect.assertions(3); // Note: one of the assertions is in afterEach.\n\n        try {\n          await mockAsyncFeatureAppDefinition.promise;\n        } catch (error) {\n          expect(error).toBe(mockError);\n        }\n\n        expect(logger.error.mock.calls).toEqual([\n          [\n            'The Feature App for the src \"example.js\" and the ID \"testId\" could not be rendered.',\n            mockError,\n          ],\n        ]);\n      });\n    });\n  });\n\n  describe('without a custom logger', () => {\n    it('logs messages using the console', () => {\n      const mockError = new Error('Failed to load Feature App module.');\n\n      mockAsyncFeatureAppDefinition = new AsyncValue(\n        Promise.reject(mockError),\n        undefined,\n        mockError,\n      );\n\n      renderWithFeatureHubContext(\n        <FeatureAppLoader src=\"example.js\" featureAppId=\"testId\" />,\n        {customLogger: false},\n      );\n\n      expectConsoleErrorCalls([\n        [\n          'The Feature App for the src \"example.js\" and the ID \"testId\" could not be rendered.',\n          mockError,\n        ],\n      ]);\n    });\n  });\n});\n"]}